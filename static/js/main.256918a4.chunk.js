(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{198:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),o=t(12),i=t.n(o),c=(t(102),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function l(n){navigator.serviceWorker.register(n).then(function(n){n.onupdatefound=function(){var e=n.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(n){console.error("Error during service worker registration:",n)})}var u=t(23),s=t(92),d=t(56),p=t(1),f=t(2),v=t(33);function h(){var n=Object(p.a)(["\n  width: 50%;\n  font-size: 18px;\n  border: 1px solid #ccc;\n  padding: 8px 12px;\n  border-right: 0;\n  border-radius: 30px 0 0 30px;\n\n  &:focus {\n    outline: none;\n  }\n\n  &:last-child {\n    border-right: 1px solid #ccc;\n    border-radius: 0 30px 30px 0;\n  }\n"]);return h=function(){return n},n}function m(){var n=Object(p.a)(["\n  display: flex;\n  width: 380px;\n"]);return m=function(){return n},n}function g(){var n=Object(p.a)(["\n  font-weight: 400;\n  margin: 0 0 5px 0;\n"]);return g=function(){return n},n}function k(){var n=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return k=function(){return n},n}var b=f.a.div(k()),y=f.a.h1(g()),w=f.a.div(m()),x=f.a.input(h()),E=function(n){var e=n.lat,t=n.lon,a=n.onChange,o=function(n){var e=n.target,t=e.name,r=e.value,o=parseInt(r,10);a(t,o)};return r.a.createElement(b,null,r.a.createElement(y,null,"Radar coordinates"),r.a.createElement(w,null,r.a.createElement(x,{type:"text",name:"lat",value:e,onChange:o}),r.a.createElement(x,{type:"text",name:"lon",value:t,onChange:o})))};function j(){var n=Object(p.a)(["\n  width: 100%;\n  input {\n    width: 20%;\n    border: 1px solid #ccc;\n    padding: 3px 4px;\n    border-right: 0;\n    border-bottom: 0;\n\n    &:last-child {\n      border-right: 1px solid #ccc;\n    }\n  }\n\n  &:last-child {\n    input {\n      border-bottom: 1px solid #ccc;\n    }\n  }\n"]);return j=function(){return n},n}var O=f.a.div(j()),C=function(n){var e=n.track,t=n.onChange,a=e.id,o=e.lat,i=e.lon,c=e.speed,l=e.rotate,u=e.uid,s=function(n){var e=n.target,r=e.name,o=e.value;t(a,r,o)};return r.a.createElement(O,null,r.a.createElement("input",{type:"text",name:"lat",value:o,onChange:s}),r.a.createElement("input",{type:"text",name:"lon",value:i,onChange:s}),r.a.createElement("input",{type:"text",name:"speed",value:c,onChange:s}),r.a.createElement("input",{type:"text",name:"rotate",value:l,onChange:s}),r.a.createElement("input",{type:"text",name:"uid",value:u,onChange:s}))};function M(){var n=Object(p.a)(["\n  width: 20%;\n  font-weight: 600;\n  padding-left: 4px;\n"]);return M=function(){return n},n}function T(){var n=Object(p.a)(["\n  display: flex;\n"]);return T=function(){return n},n}function L(){var n=Object(p.a)([""]);return L=function(){return n},n}var W=f.a.div(L()),A=f.a.div(T()),S=f.a.div(M()),U=function(n){var e=n.tracks,t=n.onChange;return r.a.createElement(W,null,r.a.createElement(A,null,r.a.createElement(S,null,"Lat"),r.a.createElement(S,null,"Lon"),r.a.createElement(S,null,"Speed"),r.a.createElement(S,null,"Heading"),r.a.createElement(S,null,"Target number")),e.map(function(n){return r.a.createElement(C,{key:n.id,track:n,onChange:t})}))},B=t(200);function R(){var n=Object(p.a)(["\n  margin: 24px 0 12px;\n"]);return R=function(){return n},n}var z=f.a.div(R()),G=function(n){var e=n.onCreateTrackBlank;return r.a.createElement(z,null,r.a.createElement(B.a,{type:"primary",shape:"round",icon:"plus",htmlType:"button",onClick:e},"Add track"))},I=t(54),D=t.n(I);function N(){var n=Object(p.a)(["\n  margin: 24px 0 0 0;\n  background: #efefef;\n  padding: 8px;\n"]);return N=function(){return n},n}var J=f.a.div(N()),P=function(n){var e=n.tracks,t=n.source;return r.a.createElement(J,null,e.map(function(n){return r.a.createElement("div",{key:"ttm-".concat(n.id)},function(n){var e=n.distance,t=n.bearing,a=n.speed,r=n.rotate,o=n.uid;return"$RATTM,".concat(o,",").concat(e,",").concat(t,",T,").concat(a,",").concat(r,",T,4.25,320.8,N,L,,M*0D")}(function(n,e){var t=new D.a(n.lat,n.lon),a=new D.a(e.lat,e.lon),r=t.distanceTo(a)/1e3,o=a.initialBearingTo(t);return{uid:n.uid,speed:n.speed,rotate:n.rotate,distance:r,bearing:o}}(n,t)))}))},$=t(88),q=t(89),H=t(93),Q=t(90),V=t(95),_=t(55),F=t.n(_),K=t(19),X=t.n(K),Y=(t(197),t(91)),Z=t.n(Y);function nn(){var n=Object(p.a)(["\n  width: 100%;\n  height: 600px;\n  position: relative;\n\n  #map {\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n  }\n"]);return nn=function(){return n},n}var en=f.a.div(nn()),tn=function(n){function e(){var n,t;Object($.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(H.a)(this,(n=Object(Q.a)(e)).call.apply(n,[this].concat(r)))).lMap={},t.mapIcon={ais:X.a.icon({iconUrl:Z.a,iconSize:[16,22],iconAnchor:[8,11]})},t.markers={},t.tracksLayer=X.a.layerGroup(),t}return Object(V.a)(e,n),Object(q.a)(e,[{key:"componentDidMount",value:function(){var n=this.props,e=n.tracks,t=n.source,a=n.onMapClick;this.lMap=X.a.map("map").setView(t,10),X.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Delta Maps"}).addTo(this.lMap),this.tracksLayer.addTo(this.lMap),this.lMap.on("click",a),e&&this.paintTracks(e)}},{key:"componentWillReceiveProps",value:function(n){var e=n.onMapClick;this.clearMarkers(),this.paintTracks(n.tracks),this.lMap.off("click",e),this.lMap.on("click",e)}},{key:"componentWillUnmount",value:function(){this.destroyMap()}},{key:"destroyMap",value:function(){this.clearMarkers(),this.lMap.off(),this.lMap&&this.lMap.remove()}},{key:"clearMarkers",value:function(){F()(this.markers,function(n){n.forEach(function(n){return n.off()})}),this.markers={},this.tracksLayer.clearLayers()}},{key:"painTrack",value:function(n,e,t){var a=X.a.marker([n.lat,n.lon],{rotationAngle:n.rotate,icon:this.mapIcon[t]});a.id=n.id,this.markers[e]?this.markers[e].push(a):this.markers[e]=[a],this.tracksLayer.addLayer(a)}},{key:"paintTracks",value:function(n){var e=this;this.clearMarkers();var t=function(n){return n.reduce(function(n,e){return n[e.uid]?n[e.uid].push(e):n[e.uid]=[e],n},{})}(n);F()(t,function(n,t){n.forEach(function(n){e.painTrack(n,t,"ais")})})}},{key:"render",value:function(){return r.a.createElement(en,null,r.a.createElement("div",{id:"map"}))}}]),e}(a.Component);function an(){var n=Object(p.a)(["\n  padding: 24px;\n"]);return an=function(){return n},n}var rn=f.a.div(an()),on={lat:40.39343817966825,lon:-73.9879041228013},cn=[{id:v.generate(),lat:40.31875441395524,lon:-73.77966225350048,speed:7,rotate:45,uid:"1"}],ln=function(){var n=Object(a.useState)(on),e=Object(d.a)(n,2),t=e[0],o=e[1],i=Object(a.useState)(cn),c=Object(d.a)(i,2),l=c[0],p=c[1],f=function(n){var e=[].concat(Object(s.a)(l),[n]);p(e)};return r.a.createElement(rn,null,r.a.createElement(E,{lat:t.lat,lon:t.lon,onChange:function(n,e){var a=Object(u.a)({},t,{lon:e});o(a)}}),r.a.createElement(G,{onCreateTrackBlank:function(){var n=l[l.length-1],e=Object(u.a)({},n,{id:v.generate()});f(e)}}),r.a.createElement(U,{tracks:l,onChange:function(n,e,t){var a=l.map(function(a){var r=Object(u.a)({},a);return r.id===n&&(r[e]=t),r});p(a)}}),r.a.createElement(P,{tracks:l,source:t}),r.a.createElement(tn,{tracks:l,source:t,onMapClick:function(n){var e=n.latlng,t=l[l.length-1],a=Object(u.a)({},t,{id:v.generate(),lat:e.lat,lon:e.lng});f(a)}}))},un=document.querySelector("#root");i.a.render(r.a.createElement(ln,null),un),function(){if("serviceWorker"in navigator){if(new URL("/ttmGenerator",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("/ttmGenerator","/service-worker.js");console.log("process.env.PUBLIC_URL:","/ttmGenerator","swUrl:",n),c?(function(n){fetch(n).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(n){n.unregister().then(function(){window.location.reload()})}):l(n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):l(n)})}}()},91:function(n,e,t){n.exports=t.p+"static/media/icon.99f7434a.svg"},97:function(n,e,t){n.exports=t(198)}},[[97,1,2]]]);
//# sourceMappingURL=main.256918a4.chunk.js.map